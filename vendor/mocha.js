/*!mocha.js*/
(function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');if(!r.exports){r.exports={};r.call(r.exports,r,r.exports,e.relative(n))}return r.exports}e.modules={};e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n};e.register=function(t,n){e.modules[t]=n};e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];if(".."==o)r.pop();else if("."!=o)r.push(o)}return e(r.join("/"))}};e.register("browser/debug.js",function(e,t,n){e.exports=function(e){return function(){}}});e.register("browser/diff.js",function(e,t,n){var r=function(){function e(e){return{newPos:e.newPos,components:e.components.slice(0)}}function t(e){var t=[];for(var n=0;n<e.length;n++){if(e[n]){t.push(e[n])}}return t}function n(e){var t=e;t=t.replace(/&/g,"&");t=t.replace(/</g,"<");t=t.replace(/>/g,">");t=t.replace(/"/g,""");return t}var r=function(e){this.ignoreWhitespace=e};r.prototype={diff:function(t,n){if(n==t){return[{value:n}]}if(!n){return[{value:t,removed:true}]}if(!t){return[{value:n,added:true}]}n=this.tokenize(n);t=this.tokenize(t);var r=n.length,i=t.length;var s=r+i;var o=[{newPos:-1,components:[]}];var u=this.extractCommon(o[0],n,t,0);if(o[0].newPos+1>=r&&u+1>=i){return o[0].components}for(var a=1;a<=s;a++){for(var f=-1*a;f<=a;f+=2){var l;var c=o[f-1],h=o[f+1];u=(h?h.newPos:0)-f;if(c){o[f-1]=undefined}var p=c&&c.newPos+1<r;var d=h&&0<=u&&u<i;if(!p&&!d){o[f]=undefined;continue}if(!p||d&&c.newPos<h.newPos){l=e(h);this.pushComponent(l.components,t[u],undefined,true)}else{l=e(c);l.newPos++;this.pushComponent(l.components,n[l.newPos],true,undefined)}var u=this.extractCommon(l,n,t,f);if(l.newPos+1>=r&&u+1>=i){return l.components}else{o[f]=l}}}},pushComponent:function(e,t,n,r){var i=e[e.length-1];if(i&&i.added===n&&i.removed===r){e[e.length-1]={value:this.join(i.value,t),added:n,removed:r}}else{e.push({value:t,added:n,removed:r})}},extractCommon:function(e,t,n,r){var i=t.length,s=n.length,o=e.newPos,u=o-r;while(o+1<i&&u+1<s&&this.equals(t[o+1],n[u+1])){o++;u++;this.pushComponent(e.components,t[o],undefined,undefined)}e.newPos=o;return u},equals:function(e,t){var n=/\S/;if(this.ignoreWhitespace&&!n.test(e)&&!n.test(t)){return true}else{return e==t}},join:function(e,t){return e+t},tokenize:function(e){return e}};var i=new r;var s=new r(true);s.tokenize=function(e){return t(e.split(/(\s+|\b)/))};var o=new r(true);o.tokenize=function(e){return t(e.split(/([{}:;,]|\s+)/))};var u=new r;u.tokenize=function(e){return e.split(/^/m)};return{diffChars:function(e,t){return i.diff(e,t)},diffWords:function(e,t){return s.diff(e,t)},diffLines:function(e,t){return u.diff(e,t)},diffCss:function(e,t){return o.diff(e,t)},createPatch:function(e,t,n,r,i){function a(e){return e.map(function(e){return" "+e})}function f(e,t,n){var r=o[o.length-2],i=t===o.length-2,s=t===o.length-3&&(n.added===!r.added||n.removed===!r.removed);if(!/\n$/.test(n.value)&&(i||s)){e.push("\\ No newline at end of file")}}var s=[];s.push("Index: "+e);s.push("===================================================================");s.push("--- "+e+(typeof r==="undefined"?"":"	"+r));s.push("+++ "+e+(typeof i==="undefined"?"":"	"+i));var o=u.diff(t,n);if(!o[o.length-1].value){o.pop()}o.push({value:"",lines:[]});var l=0,c=0,h=[],p=1,d=1;for(var v=0;v<o.length;v++){var m=o[v],g=m.lines||m.value.replace(/\n$/,"").split("\n");m.lines=g;if(m.added||m.removed){if(!l){var y=o[v-1];l=p;c=d;if(y){h=a(y.lines.slice(-4));l-=h.length;c-=h.length}}h.push.apply(h,g.map(function(e){return(m.added?"+":"-")+e}));f(h,v,m);if(m.added){d+=g.length}else{p+=g.length}}else{if(l){if(g.length<=8&&v<o.length-2){h.push.apply(h,a(g))}else{var b=Math.min(g.length,4);s.push("@@ -"+l+","+(p-l+b)+" +"+c+","+(d-c+b)+" @@");s.push.apply(s,h);s.push.apply(s,a(g.slice(0,b)));if(g.length<=4){f(s,v,m)}l=0;c=0;h=[]}}p+=g.length;d+=g.length}}return s.join("\n")+"\n"},convertChangesToXML:function(e){var t=[];for(var r=0;r<e.length;r++){var i=e[r];if(i.added){t.push("<ins>")}else if(i.removed){t.push("<del>")}t.push(n(i.value));if(i.added){t.push("</ins>")}else if(i.removed){t.push("</del>")}}return t.join("")}}}();if(typeof e!=="undefined"){e.exports=r}});e.register("browser/events.js",function(e,t,n){function r(e){return"[object Array]"=={}.toString.call(e)}function i(){}t.EventEmitter=i;i.prototype.on=function(e,t){if(!this.$events){this.$events={}}if(!this.$events[e]){this.$events[e]=t}else if(r(this.$events[e])){this.$events[e].push(t)}else{this.$events[e]=[this.$events[e],t]}return this};i.prototype.addListener=i.prototype.on;i.prototype.once=function(e,t){function r(){n.removeListener(e,r);t.apply(this,arguments)}var n=this;r.listener=t;this.on(e,r);return this};i.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var n=this.$events[e];if(r(n)){var i=-1;for(var s=0,o=n.length;s<o;s++){if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}}if(i<0){return this}n.splice(i,1);if(!n.length){delete this.$events[e]}}else if(n===t||n.listener&&n.listener===t){delete this.$events[e]}}return this};i.prototype.removeAllListeners=function(e){if(e===undefined){this.$events={};return this}if(this.$events&&this.$events[e]){this.$events[e]=null}return this};i.prototype.listeners=function(e){if(!this.$events){this.$events={}}if(!this.$events[e]){this.$events[e]=[]}if(!r(this.$events[e])){this.$events[e]=[this.$events[e]]}return this.$events[e]};i.prototype.emit=function(e){if(!this.$events){return false}var t=this.$events[e];if(!t){return false}var n=[].slice.call(arguments,1);if("function"==typeof t){t.apply(this,n)}else if(r(t)){var i=t.slice();for(var s=0,o=i.length;s<o;s++){i[s].apply(this,n)}}else{return false}return true}});e.register("browser/fs.js",function(e,t,n){});e.register("browser/path.js",function(e,t,n){});e.register("browser/progress.js",function(e,t,n){function r(){this.percent=0;this.size(0);this.fontSize(11);this.font("helvetica, arial, sans-serif")}e.exports=r;r.prototype.size=function(e){this._size=e;return this};r.prototype.text=function(e){this._text=e;return this};r.prototype.fontSize=function(e){this._fontSize=e;return this};r.prototype.font=function(e){this._font=e;return this};r.prototype.update=function(e){this.percent=e;return this};r.prototype.draw=function(e){var t=Math.min(this.percent,100),n=this._size,r=n/2,i=r,s=r,o=r-1,u=this._fontSize;e.font=u+"px "+this._font;var a=Math.PI*2*(t/100);e.clearRect(0,0,n,n);e.strokeStyle="#9f9f9f";e.beginPath();e.arc(i,s,o,0,a,false);e.stroke();e.strokeStyle="#eee";e.beginPath();e.arc(i,s,o-1,0,a,true);e.stroke();var f=this._text||(t|0)+"%",l=e.measureText(f).width;e.fillText(f,i-l/2+1,s+u/2-1);return this}});e.register("browser/tty.js",function(e,t,n){t.isatty=function(){return true};t.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}});e.register("context.js",function(e,t,n){function r(){}e.exports=r;r.prototype.runnable=function(e){if(0==arguments.length)return this._runnable;this.test=this._runnable=e;return this};r.prototype.timeout=function(e){this.runnable().timeout(e);return this};r.prototype.slow=function(e){this.runnable().slow(e);return this};r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_runnable"==e)return;if("test"==e)return;return t},2)}});e.register("hook.js",function(e,t,n){function i(e,t){r.call(this,e,t);this.type="hook"}function s(){}var r=n("./runnable");e.exports=i;s.prototype=r.prototype;i.prototype=new s;i.prototype.constructor=i;i.prototype.error=function(e){if(0==arguments.length){var e=this._error;this._error=null;return e}this._error=e}});e.register("interfaces/bdd.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,s){e.before=function(e){t[0].beforeAll(e)};e.after=function(e){t[0].afterAll(e)};e.beforeEach=function(e){t[0].beforeEach(e)};e.afterEach=function(e){t[0].afterEach(e)};e.describe=e.context=function(e,n){var i=r.create(t[0],e);t.unshift(i);n.call(i);t.shift();return i};e.xdescribe=e.xcontext=e.describe.skip=function(e,n){var i=r.create(t[0],e);i.pending=true;t.unshift(i);n.call(i);t.shift()};e.describe.only=function(t,n){var r=e.describe(t,n);s.grep(r.fullTitle())};e.it=e.specify=function(e,n){var r=t[0];if(r.pending)var n=null;var s=new i(e,n);r.addTest(s);return s};e.it.only=function(t,n){var r=e.it(t,n);s.grep(r.fullTitle())};e.xit=e.xspecify=e.it.skip=function(t){e.it(t)}})}});e.register("interfaces/exports.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){function n(e){var s;for(var o in e){if("function"==typeof e[o]){var u=e[o];switch(o){case"before":t[0].beforeAll(u);break;case"after":t[0].afterAll(u);break;case"beforeEach":t[0].beforeEach(u);break;case"afterEach":t[0].afterEach(u);break;default:t[0].addTest(new i(o,u))}}else{var s=r.create(t[0],o);t.unshift(s);n(e[o]);t.shift()}}}var t=[e];e.on("require",n)}});e.register("interfaces/index.js",function(e,t,n){t.bdd=n("./bdd");t.tdd=n("./tdd");t.qunit=n("./qunit");t.exports=n("./exports")});e.register("interfaces/qunit.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.before=function(e){t[0].beforeAll(e)};e.after=function(e){t[0].afterAll(e)};e.beforeEach=function(e){t[0].beforeEach(e)};e.afterEach=function(e){t[0].afterEach(e)};e.suite=function(e){if(t.length>1)t.shift();var n=r.create(t[0],e);t.unshift(n)};e.test=function(e,n){t[0].addTest(new i(e,n))}})}});e.register("interfaces/tdd.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e,n,s){e.setup=function(e){t[0].beforeEach(e)};e.teardown=function(e){t[0].afterEach(e)};e.suiteSetup=function(e){t[0].beforeAll(e)};e.suiteTeardown=function(e){t[0].afterAll(e)};e.suite=function(e,n){var i=r.create(t[0],e);t.unshift(i);n.call(i);t.shift();return i};e.suite.only=function(t,n){var r=e.suite(t,n);s.grep(r.fullTitle())};e.test=function(e,n){var r=new i(e,n);t[0].addTest(r);return r};e.test.only=function(t,n){var r=e.test(t,n);s.grep(r.fullTitle())};e.test.skip=function(t){e.test(t)}})}});e.register("mocha.js",function(e,t,n){function s(e){return __dirname+"/../images/"+e+".png"}function o(e){e=e||{};this.files=[];this.options=e;this.grep(e.grep);this.suite=new t.Suite("",new t.Context);this.ui(e.ui);this.bail(e.bail);this.reporter(e.reporter);if(e.timeout)this.timeout(e.timeout);if(e.slow)this.slow(e.slow)}var r=n("browser/path"),i=n("./utils");t=e.exports=o;t.utils=i;t.interfaces=n("./interfaces");t.reporters=n("./reporters");t.Runnable=n("./runnable");t.Context=n("./context");t.Runner=n("./runner");t.Suite=n("./suite");t.Hook=n("./hook");t.Test=n("./test");o.prototype.bail=function(e){if(0==arguments.length)e=true;this.suite.bail(e);return this};o.prototype.addFile=function(e){this.files.push(e);return this};o.prototype.reporter=function(e){if("function"==typeof e){this._reporter=e}else{e=e||"dot";try{this._reporter=n("./reporters/"+e)}catch(t){this._reporter=n(e)}if(!this._reporter)throw new Error('invalid reporter "'+e+'"')}return this};o.prototype.ui=function(e){e=e||"bdd";this._ui=t.interfaces[e];if(!this._ui)throw new Error('invalid interface "'+e+'"');this._ui=this._ui(this.suite);return this};o.prototype.loadFiles=function(e){var t=this;var i=this.suite;var s=this.files.length;this.files.forEach(function(o){o=r.resolve(o);i.emit("pre-require",global,o,t);i.emit("require",n(o),o,t);i.emit("post-require",global,o,t);--s||e&&e()})};o.prototype._growl=function(e,t){var r=n("growl");e.on("end",function(){var n=t.stats;if(n.failures){var i=n.failures+" of "+e.total+" tests failed";r(i,{name:"mocha",title:"Failed",image:s("error")})}else{r(n.passes+" tests passed in "+n.duration+"ms",{name:"mocha",title:"Passed",image:s("ok")})}})};o.prototype.grep=function(e){this.options.grep="string"==typeof e?new RegExp(i.escapeRegexp(e)):e;return this};o.prototype.invert=function(){this.options.invert=true;return this};o.prototype.ignoreLeaks=function(){this.options.ignoreLeaks=true;return this};o.prototype.checkLeaks=function(){this.options.ignoreLeaks=false;return this};o.prototype.growl=function(){this.options.growl=true;return this};o.prototype.globals=function(e){this.options.globals=(this.options.globals||[]).concat(e);return this};o.prototype.timeout=function(e){this.suite.timeout(e);return this};o.prototype.slow=function(e){this.suite.slow(e);return this};o.prototype.asyncOnly=function(){this.options.asyncOnly=true;return this};o.prototype.run=function(e){if(this.files.length)this.loadFiles();var n=this.suite;var r=this.options;var i=new t.Runner(n);var s=new this._reporter(i);i.ignoreLeaks=r.ignoreLeaks;i.asyncOnly=r.asyncOnly;if(r.grep)i.grep(r.grep,r.invert);if(r.globals)i.globals(r.globals);if(r.growl)this._growl(i,s);return i.run(e)}});e.register("ms.js",function(e,t,n){function u(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);var r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"y":return n*315576e5;case"days":case"day":case"d":return n*864e5;case"hours":case"hour":case"h":return n*36e5;case"minutes":case"minute":case"m":return n*6e4;case"seconds":case"second":case"s":return n*1e3;case"ms":return n}}function a(e){if(e==o)return Math.round(e/o)+" day";if(e>o)return Math.round(e/o)+" days";if(e==s)return Math.round(e/s)+" hour";if(e>s)return Math.round(e/s)+" hours";if(e==i)return Math.round(e/i)+" minute";if(e>i)return Math.round(e/i)+" minutes";if(e==r)return Math.round(e/r)+" second";if(e>r)return Math.round(e/r)+" seconds";return e+" ms"}var r=1e3;var i=r*60;var s=i*60;var o=s*24;e.exports=function(e){if("string"==typeof e)return u(e);return a(e)}});e.register("reporters/base.js",function(e,t,n){function p(e){var t=this,n=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},r=this.failures=[];if(!e)return;this.runner=e;e.stats=n;e.on("start",function(){n.start=new o});e.on("suite",function(e){n.suites=n.suites||0;e.root||n.suites++});e.on("test end",function(e){n.tests=n.tests||0;n.tests++});e.on("pass",function(e){n.passes=n.passes||0;var t=e.slow()/2;e.speed=e.duration>e.slow()?"slow":e.duration>t?"medium":"fast";n.passes++});e.on("fail",function(e,t){n.failures=n.failures||0;n.failures++;e.err=t;r.push(e)});e.on("end",function(){n.end=new o;n.duration=new o-n.start});e.on("pending",function(){n.pending++})}function d(e,t){e=String(e);return Array(t-e.length+1).join(" ")+e}function v(e,t,n){return i["diff"+t](e.actual,e.expected).map(function(e){if(n){e.value=e.value.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}if(e.added)return m("diff added",e.value);if(e.removed)return m("diff removed",e.value);return e.value}).join("")}function m(e,t){return t.split("\n").map(function(t){return h(e,t)}).join("\n")}var r=n("browser/tty"),i=n("browser/diff"),s=n("../ms");var o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval;var c=r.isatty(1)&&r.isatty(2);t=e.exports=p;t.useColors=c;t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};t.symbols={ok:"âœ“",err:"âœ–",dot:"â€¤"};if("win32"==process.platform){t.symbols.ok="âˆš";t.symbols.err="Ã—";t.symbols.dot="."}var h=t.color=function(e,n){if(!t.useColors)return n;return"["+t.colors[e]+"m"+n+"[0m"};t.window={width:c?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:r.getWindowSize()[1]:75};t.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){t.cursor.deleteLine();t.cursor.beginningOfLine()}};t.list=function(e){console.error();e.forEach(function(e,t){var n=h("error title","  %s) %s:\n")+h("error message","     %s")+h("error stack","\n%s\n");var r=e.err,i=r.message||"",s=r.stack||i,o=s.indexOf(i)+i.length,u=s.slice(0,o),a=r.actual,f=r.expected,l=true;if(r.showDiff){l=false;r.actual=a=JSON.stringify(a,null,2);r.expected=f=JSON.stringify(f,null,2)}if("string"==typeof a&&"string"==typeof f){var c=Math.max(a.length,f.length);if(c<20)u=v(r,"Chars",l);else u=v(r,"Words",l);var p=u.split("\n");if(p.length>4){var m=String(p.length).length;u=p.map(function(e,t){return d(++t,m)+" |"+" "+e}).join("\n")}u="\n"+h("diff removed","actual")+" "+h("diff added","expected")+"\n\n"+u+"\n";u=u.replace(/^/gm,"      ");n=h("error title","  %s) %s:\n%s")+h("error stack","\n%s\n")}s=s.slice(o?o+1:o).replace(/^/gm,"  ");console.error(n,t+1,e.fullTitle(),u,s)})};p.prototype.epilogue=function(){function i(e){return 1==e?"test":"tests"}var e=this.stats,n,r;console.log();if(e.failures){n=h("bright fail","  "+t.symbols.err)+h("fail"," %d of %d %s failed")+h("light",":");console.error(n,e.failures,this.runner.total,i(this.runner.total));p.list(this.failures);console.error();return}n=h("bright pass"," ")+h("green"," %d %s complete")+h("light"," (%s)");console.log(n,e.tests||0,i(e.tests),s(e.duration));if(e.pending){n=h("pending"," ")+h("pending"," %d %s pending");console.log(n,e.pending,i(e.pending))}console.log()}});e.register("reporters/doc.js",function(e,t,n){function s(e){function u(){return Array(o).join("  ")}r.call(this,e);var t=this,n=this.stats,s=e.total,o=2;e.on("suite",function(e){if(e.root)return;++o;console.log('%s<section class="suite">',u());++o;console.log("%s<h1>%s</h1>",u(),i.escape(e.title));console.log("%s<dl>",u())});e.on("suite end",function(e){if(e.root)return;console.log("%s</dl>",u());--o;console.log("%s</section>",u());--o});e.on("pass",function(e){console.log("%s  <dt>%s</dt>",u(),i.escape(e.title));var t=i.escape(i.clean(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",u(),t)})}var r=n("./base"),i=n("../utils");t=e.exports=s});e.register("reporters/dot.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,s=r.window.width*.75|0,o=0;e.on("start",function(){process.stdout.write("\n  ")});e.on("pending",function(e){process.stdout.write(i("pending",r.symbols.dot))});e.on("pass",function(e){if(++o%s==0)process.stdout.write("\n  ");if("slow"==e.speed){process.stdout.write(i("bright yellow",r.symbols.dot))}else{process.stdout.write(i(e.speed,r.symbols.dot))}});e.on("fail",function(e,t){if(++o%s==0)process.stdout.write("\n  ");process.stdout.write(i("fail",r.symbols.dot))});e.on("end",function(){console.log();t.epilogue()})}function o(){}var r=n("./base"),i=r.color;t=e.exports=s;o.prototype=r.prototype;s.prototype=new o;s.prototype.constructor=s});e.register("reporters/html-cov.js",function(e,t,n){function s(e){var t=n("jade"),s=__dirname+"/templates/coverage.jade",u=i.readFileSync(s,"utf8"),a=t.compile(u,{filename:s}),f=this;r.call(this,e,false);e.on("end",function(){process.stdout.write(a({cov:f.cov,coverageClass:o}))})}function o(e){if(e>=75)return"high";if(e>=50)return"medium";if(e>=25)return"low";return"terrible"}var r=n("./json-cov"),i=n("browser/fs");t=e.exports=s});e.register("reporters/html.js",function(e,t,n){function p(e,t){r.call(this,e);var n=this,a=this.stats,f=e.total,l=v(h),c=l.getElementsByTagName("li"),p=c[1].getElementsByTagName("em")[0],w=c[1].getElementsByTagName("a")[0],E=c[2].getElementsByTagName("em")[0],S=c[2].getElementsByTagName("a")[0],x=c[3].getElementsByTagName("em")[0],T=l.getElementsByTagName("canvas")[0],N=v('<ul id="mocha-report"></ul>'),C=[N],k,L;t=t||document.getElementById("mocha");if(T.getContext){var A=window.devicePixelRatio||1;T.style.width=T.width;T.style.height=T.height;T.width*=A;T.height*=A;L=T.getContext("2d");L.scale(A,A);k=new s}if(!t)return d("#mocha div missing, add it to your document");b(w,"click",function(){g();var e=/pass/.test(N.className)?"":" pass";N.className=N.className.replace(/fail|pass/g,"")+e;if(N.className.trim())m("test pass")});b(S,"click",function(){g();var e=/fail/.test(N.className)?"":" fail";N.className=N.className.replace(/fail|pass/g,"")+e;if(N.className.trim())m("test fail")});t.appendChild(l);t.appendChild(N);if(k)k.size(40);e.on("suite",function(e){if(e.root)return;var t="?grep="+encodeURIComponent(e.fullTitle());var n=v('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,o(e.title));C[0].appendChild(n);C.unshift(document.createElement("ul"));n.appendChild(C[0])});e.on("suite end",function(e){if(e.root)return;C.shift()});e.on("fail",function(t,n){if("hook"==t.type)e.emit("test end",t)});e.on("test end",function(e){window.scrollTo(0,document.body.scrollHeight);var t=a.tests/this.total*100|0;if(k)k.update(t).draw(L);var n=new u-a.start;y(p,a.passes);y(E,a.failures);y(x,(n/1e3).toFixed(2));if("passed"==e.state){var r=v('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="?grep=%e" class="replay">â€£</a></h2></li>',e.speed,e.title,e.duration,encodeURIComponent(e.fullTitle()))}else if(e.pending){var r=v('<li class="test pass pending"><h2>%e</h2></li>',e.title)}else{var r=v('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay">â€£</a></h2></li>',e.title,encodeURIComponent(e.fullTitle()));var s=e.err.stack||e.err.toString();if(!~s.indexOf(e.err.message)){s=e.err.message+"\n"+s}if("[object Error]"==s)s=e.err.message;if(!e.err.stack&&e.err.sourceURL&&e.err.line!==undefined){s+="\n("+e.err.sourceURL+":"+e.err.line+")"}r.appendChild(v('<pre class="error">%e</pre>',s))}if(!e.pending){var o=r.getElementsByTagName("h2")[0];b(o,"click",function(){f.style.display="none"==f.style.display?"block":"none"});var f=v("<pre><code>%e</code></pre>",i.clean(e.fn.toString()));r.appendChild(f);f.style.display="none"}if(C[0])C[0].appendChild(r)})}function d(e){document.body.appendChild(v('<div id="mocha-error">%s</div>',e))}function v(e){var t=arguments,n=document.createElement("div"),r=1;n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[r++]);case"e":return o(t[r++])}});return n.firstChild}function m(e){var t=document.getElementsByClassName("suite");for(var n=0;n<t.length;n++){var r=t[n].getElementsByClassName(e);if(0==r.length)t[n].className+=" hidden"}}function g(){var e=document.getElementsByClassName("suite hidden");for(var t=0;t<e.length;++t){e[t].className=e[t].className.replace("suite hidden","suite")}}function y(e,t){if(e.textContent){e.textContent=t}else{e.innerText=t}}function b(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else{e.attachEvent("on"+t,n)}}var r=n("./base"),i=n("../utils"),s=n("../browser/progress"),o=i.escape;var u=global.Date,a=global.setTimeout,f=global.setInterval,l=global.clearTimeout,c=global.clearInterval;t=e.exports=p;var h='<ul id="mocha-stats">'+'<li class="progress"><canvas width="40" height="40"></canvas></li>'+'<li class="passes"><a href="#">passes:</a> <em>0</em></li>'+'<li class="failures"><a href="#">failures:</a> <em>0</em></li>'+'<li class="duration">duration: <em>0</em>s</li>'+"</ul>"});e.register("reporters/index.js",function(e,t,n){t.Base=n("./base");t.Dot=n("./dot");t.Doc=n("./doc");t.TAP=n("./tap");t.JSON=n("./json");t.HTML=n("./html");t.List=n("./list");t.Min=n("./min");t.Spec=n("./spec");t.Nyan=n("./nyan");t.XUnit=n("./xunit");t.Markdown=n("./markdown");t.Progress=n("./progress");t.Landing=n("./landing");t.JSONCov=n("./json-cov");t.HTMLCov=n("./html-cov");t.JSONStream=n("./json-stream");t.Teamcity=n("./teamcity")});e.register("reporters/json-cov.js",function(e,t,n){function i(e,t){var n=this,t=1==arguments.length?true:t;r.call(this,e);var i=[],o=[],a=[];e.on("test end",function(e){i.push(e)});e.on("pass",function(e){a.push(e)});e.on("fail",function(e){o.push(e)});e.on("end",function(){var e=global._$jscoverage||{};var r=n.cov=s(e);r.stats=n.stats;r.tests=i.map(u);r.failures=o.map(u);r.passes=a.map(u);if(!t)return;process.stdout.write(JSON.stringify(r,null,2))})}function s(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in e){var r=o(n,e[n]);t.files.push(r);t.hits+=r.hits;t.misses+=r.misses;t.sloc+=r.sloc}t.files.sort(function(e,t){return e.filename.localeCompare(t.filename)});if(t.sloc>0){t.coverage=t.hits/t.sloc*100}return t}function o(e,t){var n={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};t.source.forEach(function(e,r){r++;if(t[r]===0){n.misses++;n.sloc++}else if(t[r]!==undefined){n.hits++;n.sloc++}n.source[r]={source:e,coverage:t[r]===undefined?"":t[r]}});n.coverage=n.hits/n.sloc*100;return n}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base");t=e.exports=i;});e.register("reporters/json-stream.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=e.total;e.on("start",function(){console.log(JSON.stringify(["start",{total:i}]))});e.on("pass",function(e){console.log(JSON.stringify(["pass",o(e)]))});e.on("fail",function(e,t){console.log(JSON.stringify(["fail",o(e)]))});e.on("end",function(){process.stdout.write(JSON.stringify(["end",t.stats]))})}function o(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.color;t=e.exports=s});e.register("reporters/json.js",function(e,t,n){function o(e){var t=this;r.call(this,e);var n=[],i=[],s=[];e.on("test end",function(e){n.push(e)});e.on("pass",function(e){s.push(e)});e.on("fail",function(e){i.push(e)});e.on("end",function(){var e={stats:t.stats,tests:n.map(u),failures:i.map(u),passes:s.map(u)};process.stdout.write(JSON.stringify(e,null,2))})}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o});e.register("reporters/landing.js",function(e,t,n){function o(e){function h(){var e=Array(o).join("-");return"  "+s("runway",e)}r.call(this,e);var t=this,n=this.stats,o=r.window.width*.75|0,u=e.total,a=process.stdout,f=s("plane","âœˆ"),l=-1,c=0;e.on("start",function(){a.write("\n  ");i.hide()});e.on("test end",function(e){var t=-1==l?o*++c/u|0:l;if("failed"==e.state){f=s("plane crash","âœˆ");l=t}a.write("[4F\n\n");a.write(h());a.write("\n  ");a.write(s("runway",Array(t).join("â‹…")));a.write(f);a.write(s("runway",Array(o-t).join("â‹…")+"\n"));a.write(h());a.write("[0m")});e.on("end",function(){i.show();console.log();t.epilogue()})}function u(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;r.colors.plane=0;r.colors["plane crash"]=31;r.colors.runway=90;u.prototype=r.prototype;o.prototype=new u;o.prototype.constructor=o});e.register("reporters/list.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,o=0;e.on("start",function(){console.log()});e.on("test",function(e){process.stdout.write(s("pass","    "+e.fullTitle()+": "))});e.on("pending",function(e){var t=s("checkmark","  -")+s("pending"," %s");console.log(t,e.fullTitle())});e.on("pass",function(e){var t=s("checkmark","  "+r.symbols.dot)+s("pass"," %s: ")+s(e.speed,"%dms");i.CR();console.log(t,e.fullTitle(),e.duration)});e.on("fail",function(e,t){i.CR();console.log(s("fail","  %d) %s"),++o,e.fullTitle())});e.on("end",t.epilogue.bind(t))}function u(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;u.prototype=r.prototype;o.prototype=new u;o.prototype.constructor=o});e.register("reporters/markdown.js",function(e,t,n){function s(e){function u(e){return Array(s).join("#")+" "+e}function a(){return Array(s).join("  ")}function f(e,t){var n=t;t=t[e.title]=t[e.title]||{suite:e};e.suites.forEach(function(e){f(e,t)});return n}function l(e,t){++t;var n="";var r;for(var s in e){if("suite"==s)continue;if(s)r=" - ["+s+"](#"+i.slug(e[s].suite.fullTitle())+")\n";if(s)n+=Array(t).join("  ")+r;n+=l(e[s],t)}--t;return n}function c(e){var t=f(e,{});return l(t,0)}r.call(this,e);var t=this,n=this.stats,s=0,o="";c(e.suite);e.on("suite",function(e){++s;var t=i.slug(e.fullTitle());o+='<a name="'+t+'"></a>'+"\n";o+=u(e.title)+"\n"});e.on("suite end",function(e){--s});e.on("pass",function(e){var t=i.clean(e.fn.toString());o+=e.title+".\n";o+="\n```js\n";o+=t+"\n";o+="```\n\n"});e.on("end",function(){process.stdout.write("# TOC\n");process.stdout.write(c(e.suite));process.stdout.write(o)})}var r=n("./base"),i=n("../utils");t=e.exports=s});e.register("reporters/min.js",function(e,t,n){function i(e){r.call(this,e);e.on("start",function(){process.stdout.write("[2J");process.stdout.write("[1;3H")});e.on("end",this.epilogue.bind(this))}function s(){}var r=n("./base");t=e.exports=i;s.prototype=r.prototype;i.prototype=new s;i.prototype.constructor=i});e.register("reporters/nyan.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=r.window.width*.75|0,s=this.rainbowColors=t.generateColors(),u=this.colorIndex=0,a=this.numberOfLines=4,f=this.trajectories=[[],[],[],[]],l=this.nyanCatWidth=11,c=this.trajectoryWidthMax=i-l,h=this.scoreboardWidth=5,p=this.tick=0,d=0;e.on("start",function(){r.cursor.hide();t.draw("start")});e.on("pending",function(e){t.draw("pending")});e.on("pass",function(e){t.draw("pass")});e.on("fail",function(e,n){t.draw("fail")});e.on("end",function(){r.cursor.show();for(var e=0;e<t.numberOfLines;e++)o("\n");t.epilogue()})}function o(e){process.stdout.write(e)}function u(){}var r=n("./base"),i=r.color;t=e.exports=s;s.prototype.draw=function(e){this.appendRainbow();this.drawScoreboard();this.drawRainbow();this.drawNyanCat(e);this.tick=!this.tick};s.prototype.drawScoreboard=function(){function n(e,t){o(" ");o("["+e+"m"+t+"[0m");o("\n")}var e=this.stats;var t=r.colors;n(t.green,e.passes);n(t.fail,e.failures);n(t.pending,e.pending);o("\n");this.cursorUp(this.numberOfLines)};s.prototype.appendRainbow=function(){var e=this.tick?"_":"-";var t=this.rainbowify(e);for(var n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];if(r.length>=this.trajectoryWidthMax)r.shift();r.push(t)}};s.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t,n){o("["+e.scoreboardWidth+"C");o(t.join(""));o("\n")});this.cursorUp(this.numberOfLines)};s.prototype.drawNyanCat=function(e){var t=this;var n=this.scoreboardWidth+this.trajectories[0].length;[0,1,2,3].forEach(function(r){o("["+n+"C");switch(r){case 0:o("_,------,");o("\n");break;case 1:var i=t.tick?"  ":"   ";o("_|"+i+"/\\_/\\ ");o("\n");break;case 2:var i=t.tick?"_":"__";var s=t.tick?"~":"^";var u;switch(e){case"pass":u="( ^ .^)";break;case"fail":u="( o .o)";break;default:u="( - .-)"}o(s+"|"+i+u+" ");o("\n");break;case 3:var i=t.tick?" ":"  ";o(i+'""  "" ');o("\n");break}});this.cursorUp(this.numberOfLines)};s.prototype.cursorUp=function(e){o("["+e+"A")};s.prototype.cursorDown=function(e){o("["+e+"B")};s.prototype.generateColors=function(){var e=[];for(var t=0;t<6*7;t++){var n=Math.floor(Math.PI/3);var r=t*(1/6);var i=Math.floor(3*Math.sin(r)+3);var s=Math.floor(3*Math.sin(r+2*n)+3);var o=Math.floor(3*Math.sin(r+4*n)+3);e.push(36*i+6*s+o+16)}return e};s.prototype.rainbowify=function(e){var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];this.colorIndex+=1;return"[38;5;"+t+"m"+e+"[0m"};u.prototype=r.prototype;s.prototype=new u;s.prototype.constructor=s});e.register("reporters/progress.js",function(e,t,n){function o(e,t){r.call(this,e);var n=this,t=t||{},o=this.stats,u=r.window.width*.5|0,a=e.total,f=0,l=Math.max;t.open=t.open||"[";t.complete=t.complete||"â–¬";t.incomplete=t.incomplete||r.symbols.dot;t.close=t.close||"]";t.verbose=false;e.on("start",function(){console.log();i.hide()});e.on("test end",function(){f++;var e=a-f,n=f/a,r=u*n|0,o=u-r;i.CR();process.stdout.write("[J");process.stdout.write(s("progress","  "+t.open));process.stdout.write(Array(r).join(t.complete));process.stdout.write(Array(o).join(t.incomplete));process.stdout.write(s("progress",t.close));if(t.verbose){process.stdout.write(s("progress"," "+f+" of "+a))}});e.on("end",function(){i.show();console.log();n.epilogue()})}function u(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;r.colors.progress=90;u.prototype=r.prototype;o.prototype=new u;o.prototype.constructor=o});e.register("reporters/spec.js",function(e,t,n){function o(e){function a(){return Array(o).join("  ")}r.call(this,e);var t=this,n=this.stats,o=0,u=0;e.on("start",function(){console.log()});e.on("suite",function(e){++o;console.log(s("suite","%s%s"),a(),e.title)});e.on("suite end",function(e){--o;if(1==o)console.log()});e.on("test",function(e){process.stdout.write(a()+s("pass","  â—¦ "+e.title+": "))});e.on("pending",function(e){var t=a()+s("pending","  - %s");console.log(t,e.title)});e.on("pass",function(e){if("fast"==e.speed){var t=a()+s("checkmark","  "+r.symbols.ok)+s("pass"," %s ");i.CR();console.log(t,e.title)}else{var t=a()+s("checkmark","  "+r.symbols.ok)+s("pass"," %s ")+s(e.speed,"(%dms)");i.CR();console.log(t,e.title,e.duration)}});e.on("fail",function(e,t){i.CR();console.log(a()+s("fail","  %d) %s"),++u,e.title)});e.on("end",t.epilogue.bind(t))}function u(){}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o;u.prototype=r.prototype;o.prototype=new u;o.prototype.constructor=o});e.register("reporters/tap.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,i=1,s=0,o=0;e.on("start",function(){var t=e.grepTotal(e.suite);console.log("%d..%d",1,t)});e.on("test end",function(){++i});e.on("pending",function(e){console.log("ok %d %s # SKIP -",i,u(e))});e.on("pass",function(e){s++;console.log("ok %d %s",i,u(e))});e.on("fail",function(e,t){o++;console.log("not ok %d %s",i,u(e));if(t.stack)console.log(t.stack.replace(/^/gm,"  "))});e.on("end",function(){console.log("# tests "+(s+o));console.log("# pass "+s);console.log("# fail "+o)})}function u(e){return e.fullTitle().replace(/#/g,"")}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o});e.register("reporters/teamcity.js",function(e,t,n){function i(e){r.call(this,e);var t=this.stats;e.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")});e.on("test",function(e){console.log("##teamcity[testStarted name='"+s(e.fullTitle())+"']")});e.on("fail",function(e,t){console.log("##teamcity[testFailed name='"+s(e.fullTitle())+"' message='"+s(t.message)+"']")});e.on("pending",function(e){console.log("##teamcity[testIgnored name='"+s(e.fullTitle())+"' message='pending']")});e.on("test end",function(e){console.log("##teamcity[testFinished name='"+s(e.fullTitle())+"' duration='"+e.duration+"']")});e.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+t.duration+"']")})}function s(e){return e.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}var r=n("./base");t=e.exports=i});e.register("reporters/xunit.js",function(e,t,n){function c(e){r.call(this,e);var t=this.stats,n=[],i=this;e.on("pass",function(e){n.push(e)});e.on("fail",function(e){n.push(e)});e.on("end",function(){console.log(d("testsuite",{name:"Mocha Tests",tests:t.tests,failures:t.failures,errors:t.failures,skip:t.tests-t.failures-t.passes,timestamp:(new o).toUTCString(),time:t.duration/1e3},false));n.forEach(p);console.log("</testsuite>")})}function h(){}function p(e){var t={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3};if("failed"==e.state){var n=e.err;t.message=s(n.message);console.log(d("testcase",t,false,d("failure",t,false,v(n.stack))))}else if(e.pending){console.log(d("testcase",t,false,d("skipped",{},true)))}else{console.log(d("testcase",t,true))}}function d(e,t,n,r){var i=n?"/>":">",o=[],u;for(var a in t){o.push(a+'="'+s(t[a])+'"')}u="<"+e+(o.length?" "+o.join(" "):"")+i;if(r)u+=r+"</"+e+i;return u}function v(e){return"<![CDATA["+s(e)+"]]>"}var r=n("./base"),i=n("../utils"),s=i.escape;var o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval;t=e.exports=c;h.prototype=r.prototype;c.prototype=new h;c.prototype.constructor=c});e.register("runnable.js",function(e,t,n){function h(e,t){this.title=e;this.fn=t;this.async=t&&t.length;this.sync=!this.async;this._timeout=2e3;this._slow=75;this.timedOut=false}function p(){}var r=n("browser/events").EventEmitter,i=n("browser/debug")("mocha:runnable"),s=n("./ms");var o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval;var c=Object.prototype.toString;e.exports=h;p.prototype=r.prototype;h.prototype=new p;h.prototype.constructor=h;h.prototype.timeout=function(e){if(0==arguments.length)return this._timeout;if("string"==typeof e)e=s(e);i("timeout %d",e);this._timeout=e;if(this.timer)this.resetTimeout();return this};h.prototype.slow=function(e){if(0===arguments.length)return this._slow;if("string"==typeof e)e=s(e);i("timeout %d",e);this._slow=e;return this};h.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title};h.prototype.clearTimeout=function(){f(this.timer)};h.prototype.inspect=function(){return JSON.stringify(this,function(e,t){if("_"==e[0])return;if("parent"==e)return"#<Suite>";if("ctx"==e)return"#<Context>";return t},2)};h.prototype.resetTimeout=function(){var e=this,t=this.timeout();this.clearTimeout();if(t){this.timer=u(function(){e.callback(new Error("timeout of "+t+"ms exceeded"));e.timedOut=true},t)}};h.prototype.run=function(e){function f(e){if(a)return;a=true;t.emit("error",e||new Error("done() called multiple times"))}function l(n){if(t.timedOut)return;if(s)return f(n);t.clearTimeout();t.duration=new o-r;s=true;e(n)}var t=this,n=this.timeout(),r=new o,i=this.ctx,s,a;if(i)i.runnable(this);if(this.async){if(n){this.timer=u(function(){l(new Error("timeout of "+n+"ms exceeded"));t.timedOut=true},n)}}this.callback=l;if(this.async){try{this.fn.call(i,function(e){if(e instanceof Error||c.call(e)==="[object Error]")return l(e);if(null!=e)return l(new Error("done() invoked with non-Error: "+e));l()})}catch(h){l(h)}return}if(this.asyncOnly){return l(new Error("--async-only option in use without declaring `done()`"))}try{if(!this.pending)this.fn.call(i);this.duration=new o-r;e()}catch(h){e(h)}}});e.register("runner.js",function(e,t,n){function h(e){var t=this;this._globals=[];this.suite=e;this.total=e.total();this.failures=0;this.on("test end",function(e){t.checkGlobals(e)});this.on("hook end",function(e){t.checkGlobals(e)});this.grep(/.*/);this.globals(this.globalProps().concat(["errno"]))}function p(){}function d(e,t){return u(t,function(t){var n=u(e,function(e){if(~e.indexOf("*"))return 0==t.indexOf(e.split("*")[0]);if(/^mocha-/.test(t))return true;return t==e});return n.length==0&&(!global.navigator||"onerror"!==t)})}var r=n("browser/events").EventEmitter,i=n("browser/debug")("mocha:runner"),s=n("./test"),o=n("./utils"),u=o.filter,a=o.keys,f=function(){},l=global.setImmediate||process.nextTick;var c=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"];e.exports=h;p.prototype=r.prototype;h.prototype=new p;h.prototype.constructor=h;h.prototype.grep=function(e,t){i("grep %s",e);this._grep=e;this._invert=t;this.total=this.grepTotal(this.suite);return this};h.prototype.grepTotal=function(e){var t=this;var n=0;e.eachTest(function(e){var r=t._grep.test(e.fullTitle());if(t._invert)r=!r;if(r)n++});return n};h.prototype.globalProps=function(){var e=o.keys(global);for(var t=0;t<c.length;++t){if(~o.indexOf(e,c[t]))continue;e.push(c[t])}return e};h.prototype.globals=function(e){if(0==arguments.length)return this._globals;i("globals %j",e);o.forEach(e,function(e){this._globals.push(e)},this);return this};h.prototype.checkGlobals=function(e){if(this.ignoreLeaks)return;var t=this._globals;var n=this.globalProps();var r=process.kill;var i;if(r&&1==t.length-n.length)return;else if(2==t.length-n.length)return;i=d(t,n);this._globals=this._globals.concat(i);if(i.length>1){this.fail(e,new Error("global leaks detected: "+i.join(", ")+""))}else if(i.length){this.fail(e,new Error("global leak detected: "+i[0]))}};h.prototype.fail=function(e,t){++this.failures;e.state="failed";if("string"==typeof t){t=new Error('the string "'+t+'" was thrown, throw an Error :)')}this.emit("fail",e,t)};h.prototype.failHook=function(e,t){this.fail(e,t);this.emit("end")};h.prototype.hook=function(e,t){function o(e){var n=r[e];if(!n)return t();i.currentRunnable=n;i.emit("hook",n);n.on("error",function(e){i.failHook(n,e)});n.run(function(t){n.removeAllListeners("error");var r=n.error();if(r)i.fail(i.test,r);if(t)return i.failHook(n,t);i.emit("hook end",n);o(++e)})}var n=this.suite,r=n["_"+e],i=this,s;l(function(){o(0)})};h.prototype.hooks=function(e,t,n){function s(o){r.suite=o;if(!o){r.suite=i;return n()}r.hook(e,function(e){if(e){r.suite=i;return n(e)}s(t.pop())})}var r=this,i=this.suite;s(t.pop())};h.prototype.hookUp=function(e,t){var n=[this.suite].concat(this.parents()).reverse();this.hooks(e,n,t)};h.prototype.hookDown=function(e,t){var n=[this.suite].concat(this.parents());this.hooks(e,n,t)};h.prototype.parents=function(){var e=this.suite,t=[];while(e=e.parent)t.push(e);return t};h.prototype.runTest=function(e){var t=this.test,n=this;if(this.asyncOnly)t.asyncOnly=true;try{t.on("error",function(e){n.fail(t,e)});t.run(e)}catch(r){e(r)}};h.prototype.runTests=function(e,t){function s(o){if(n.failures&&e._bail)return t();i=r.shift();if(!i)return t();var u=n._grep.test(i.fullTitle());if(n._invert)u=!u;if(!u)return s();if(i.pending){n.emit("pending",i);n.emit("test end",i);return s()}n.emit("test",n.test=i);n.hookDown("beforeEach",function(){n.currentRunnable=n.test;n.runTest(function(e){i=n.test;if(e){n.fail(i,e);n.emit("test end",i);return n.hookUp("afterEach",s)}i.state="passed";n.emit("pass",i);n.emit("test end",i);n.hookUp("afterEach",s)})})}var n=this,r=e.tests.slice(),i;this.next=s;s()};h.prototype.runSuite=function(e,t){function o(){var t=e.suites[s++];if(!t)return u();r.runSuite(t,o)}function u(){r.suite=e;r.hook("afterAll",function(){r.emit("suite end",e);t()})}var n=this.grepTotal(e),r=this,s=0;i("run suite %s",e.fullTitle());if(!n)return t();this.emit("suite",this.suite=e);this.hook("beforeAll",function(){r.runTests(e,o)})};h.prototype.uncaught=function(e){i("uncaught exception %s",e.message);var t=this.currentRunnable;if(!t||"failed"==t.state)return;t.clearTimeout();e.uncaught=true;this.fail(t,e);if("test"==t.type){this.emit("test end",t);this.hookUp("afterEach",this.next);return}this.emit("end")};h.prototype.run=function(e){function n(e){t.uncaught(e)}var t=this,e=e||function(){};i("start");this.on("end",function(){i("end");process.removeListener("uncaughtException",n);e(t.failures)});this.emit("start");this.runSuite(this.suite,function(){i("finished running");t.emit("end")});process.on("uncaughtException",n);return this}});e.register("suite.js",function(e,t,n){function a(e,t){this.title=e;this.ctx=t;this.suites=[];this.tests=[];this.pending=false;this._beforeEach=[];this._beforeAll=[];this._afterEach=[];this._afterAll=[];this.root=!e;this._timeout=2e3;this._slow=75;this._bail=false}function f(){}var r=n("browser/events").EventEmitter,i=n("browser/debug")("mocha:suite"),s=n("./ms"),o=n("./utils"),u=n("./hook");t=e.exports=a;t.create=function(e,t){var n=new a(t,e.ctx);n.parent=e;if(e.pending)n.pending=true;t=n.fullTitle();e.addSuite(n);return n};f.prototype=r.prototype;a.prototype=new f;a.prototype.constructor=a;a.prototype.clone=function(){var e=new a(this.title);i("clone");e.ctx=this.ctx;e.timeout(this.timeout());e.slow(this.slow());e.bail(this.bail());return e};a.prototype.timeout=function(e){if(0==arguments.length)return this._timeout;if("string"==typeof e)e=s(e);i("timeout %d",e);this._timeout=parseInt(e,10);return this};a.prototype.slow=function(e){if(0===arguments.length)return this._slow;if("string"==typeof e)e=s(e);i("slow %d",e);this._slow=e;return this};a.prototype.bail=function(e){if(0==arguments.length)return this._bail;i("bail %s",e);this._bail=e;return this};a.prototype.beforeAll=function(e){if(this.pending)return this;var t=new u('"before all" hook',e);t.parent=this;t.timeout(this.timeout());t.slow(this.slow());t.ctx=this.ctx;this._beforeAll.push(t);this.emit("beforeAll",t);return this};a.prototype.afterAll=function(e){if(this.pending)return this;var t=new u('"after all" hook',e);t.parent=this;t.timeout(this.timeout());t.slow(this.slow());t.ctx=this.ctx;this._afterAll.push(t);this.emit("afterAll",t);return this};a.prototype.beforeEach=function(e){if(this.pending)return this;var t=new u('"before each" hook',e);t.parent=this;t.timeout(this.timeout());t.slow(this.slow());t.ctx=this.ctx;this._beforeEach.push(t);this.emit("beforeEach",t);return this};a.prototype.afterEach=function(e){if(this.pending)return this;var t=new u('"after each" hook',e);t.parent=this;t.timeout(this.timeout());t.slow(this.slow());t.ctx=this.ctx;this._afterEach.push(t);this.emit("afterEach",t);return this};a.prototype.addSuite=function(e){e.parent=this;e.timeout(this.timeout());e.slow(this.slow());e.bail(this.bail());this.suites.push(e);this.emit("suite",e);return this};a.prototype.addTest=function(e){e.parent=this;e.timeout(this.timeout());e.slow(this.slow());e.ctx=this.ctx;this.tests.push(e);this.emit("test",e);return this};a.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title};a.prototype.total=function(){return o.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length};a.prototype.eachTest=function(e){o.forEach(this.tests,e);o.forEach(this.suites,function(t){t.eachTest(e)});return this}});e.register("test.js",function(e,t,n){function i(e,t){r.call(this,e,t);this.pending=!t;this.type="test"}function s(){}var r=n("./runnable");e.exports=i;s.prototype=r.prototype;i.prototype=new s;i.prototype.constructor=i});e.register("utils.js",function(e,t,n){function a(e){return!~u.indexOf(e)}function f(e){return e.replace(/</g,"<").replace(/>/g,">").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var r=n("browser/fs"),i=n("browser/path"),s=i.join,o=n("browser/debug")("mocha:watch");var u=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&").replace(/"/g,""").replace(/</g,"<").replace(/>/g,">")};t.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)};t.indexOf=function(e,t,n){for(var r=n||0,i=e.length;r<i;r++){if(e[r]===t)return r}return-1};t.reduce=function(e,t,n){var r=n;for(var i=0,s=e.length;i<s;i++){r=t(r,e[i],i,e)}return r};t.filter=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r];if(t(s,r,e))n.push(s)}return n};t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e){if(n.call(e,r)){t.push(r)}}return t};t.watch=function(e,t){var n={interval:100};e.forEach(function(e){o("file %s",e);r.watchFile(e,n,function(n,r){if(r.mtime<n.mtime)t(e)})})};t.files=function(e,n){n=n||[];r.readdirSync(e).filter(a).forEach(function(i){i=s(e,i);if(r.statSync(i).isDirectory()){t.files(i,n)}else if(i.match(/\.(js|coffee)$/)){n.push(i)}});return n};t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")};t.clean=function(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var n=e.match(/^\n?( *)/)[1].length,r=new RegExp("^ {"+n+"}","gm");e=e.replace(r,"");return t.trim(e)};t.escapeRegexp=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};t.trim=function(e){return e.replace(/^\s+|\s+$/g,"")};t.parseQuery=function(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),i=t.slice(++n);e[r]=decodeURIComponent(i);return e},{})};t.highlightTags=function(e){var t=document.getElementsByTagName(e);for(var n=0,r=t.length;n<r;++n){t[n].innerHTML=f(t[n].innerHTML)}}});process={};process.exit=function(e){};process.stdout={};global=window;process.nextTick=function(){if(window.ActiveXObject||!window.postMessage){return function(e){e()}}var e=[],t="mocha-zero-timeout";window.addEventListener("message",function(n){if(n.source==window&&n.data==t){if(n.stopPropagation)n.stopPropagation();if(e.length)e.shift()()}},true);return function(n){e.push(n);window.postMessage(t,"*")}}();process.removeListener=function(e){if("uncaughtException"==e){window.onerror=null}};process.on=function(e,t){if("uncaughtException"==e){window.onerror=function(e,n,r){t(new Error(e+" ("+n+":"+r+")"))}}};(function(){var t=window.Mocha=e("mocha"),n=window.mocha=new t({reporter:"html"});n.ui=function(e){t.prototype.ui.call(this,e);this.suite.emit("pre-require",window,null,this);return this};n.setup=function(e){if("string"==typeof e)e={ui:e};for(var t in e)this[t](e[t]);return this};n.run=function(e){var r=n.options;n.globals("location");var i=t.utils.parseQuery(window.location.search||"");if(i.grep)n.grep(i.grep);if(i.invert)n.invert();return t.prototype.run.call(n,function(){t.utils.highlightTags("code");if(e)e()})}})()})()