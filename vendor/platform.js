/*!
 * Platform.js v1.0.0 <http://mths.be/platform>
 * Copyright 2010-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */
(function(e){"use strict";function g(e){e=String(e);return e.charAt(0).toUpperCase()+e.slice(1)}function y(e,t){var n=-1,r=e.length;if(r==r>>>0){while(++n<r){t(e[n],n,e)}}else{w(e,t)}}function b(e){e=C(e);return/^(?:webOS|i(?:OS|P))/.test(e)?e:g(e)}function w(e,t){for(var n in e){S(e,n)&&t(e[n],n,e)}}function E(e){return e==null?g(e):s.call(e).slice(8,-1)}function S(){S=function(e,t){var n=e!=null&&(e.constructor||Object).prototype;return!!n&&t in Object(e)&&!(t in n&&e[t]===n[t])};if(E(c)=="Function"){S=function(e,t){return e!=null&&c.call(e,t)}}else if({}.__proto__==Object.prototype){S=function(e,t){var n=false;if(e!=null){e=Object(e);e.__proto__=[e.__proto__,e.__proto__=null,n=t in e][0]}return n}}return S.apply(this,arguments)}function x(e,t){var n=e!=null?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&(n=="object"?!!e[t]:true)}function T(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function N(e,t){var n=null;y(e,function(r,i){n=t(n,r,i,e)});return n}function C(e){return String(e).replace(/^ +| +$/g,"")}function k(c){function B(e){return N(e,function(e,t){return e||RegExp("\\b"+(t.pattern||T(t))+"\\b","i").exec(c)&&(t.label||t)})}function j(e){return N(e,function(e,t,n){return e||(t[D]||t[0,/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+(n.pattern||T(n))+"(?:\\b|\\w*\\d)","i").exec(c))&&(n.label||n)})}function F(e){return N(e,function(e,t){return e||RegExp("\\b"+(t.pattern||T(t))+"\\b","i").exec(c)&&(t.label||t)})}function I(e){return N(e,function(e,t){var n=t.pattern||T(t);if(!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(c))){g={6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};if(/^Win/i.test(e)&&(g=g[0,/[\d.]+$/.exec(e)])){e="Windows "+g}e=b(String(e).replace(RegExp(n,"i"),t.label||t).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])}return e})}function q(e){return N(e,function(e,t){var n=t.pattern||T(t);if(!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(c)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(c))){if((e=String(t.label||e).split("/"))[1]&&!/[\d.]+/.test(e[0])){e[0]+=" "+e[1]}t=t.label||t;e=b(e[0].replace(RegExp(n,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")(\\w)","i"),"$1 $2"))}return e})}function R(e){return N(e,function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(c)||0)[1]||null})}function U(){return this.description||""}c||(c=m);var g;var y=c;var S=[];var L=null;var A=c==m;var O=A&&p&&typeof p.version=="function"&&p.version();var M=B([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]);var _=F(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera","Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]);var D=q(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom"]);var P=j({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1},Sony:{"PlayStation Vita":1}});var H=I(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);M&&(M=[M]);if(P&&!D){D=q([P])}if(g=/Google TV/.exec(D)){D=g[0]}if(/\bSimulator\b/i.test(c)){D=(D?D+" ":"")+"Simulator"}if(/^iP/.test(D)){_||(_="Safari");H="iOS"+((g=/ OS ([\d_]+)/i.exec(c))?" "+g[1].replace(/_/g,"."):"")}else if(_=="Konqueror"&&!/buntu/i.test(H)){H="Kubuntu"}else if(P&&P!="Google"&&/Chrome|Vita/.test(_+";"+D)){_="Android Browser";H=/Android/.test(H)?H:"Android"}else if(!_||(g=!/\bMinefield\b/i.test(c)&&/Firefox|Safari/.exec(_))){if(_&&!D&&/[\/,]|^[^(]+?\)/.test(c.slice(c.indexOf(g+"/")+8))){_=null}if((g=D||P||H)&&(D||P||/Android|Symbian OS|Tablet OS|webOS/.test(H))){_=/[a-z]+(?: Hat)?/i.exec(/Android/.test(H)?H:g)+" Browser"}}if(!O){O=R(["(?:Cloud9|CriOS|CrMo|Opera ?Mini|Raven|Silk(?!/[\\d.]+$))","Version",T(_),"(?:Firefox|Minefield|NetFront)"])}if(M=="iCab"&&parseFloat(O)>3){M=["WebKit"]}else if(g=/Opera/.test(_)&&"Presto"||/\b(?:Midori|Nook|Safari)\b/i.test(c)&&"WebKit"||!M&&/\bMSIE\b/i.test(c)&&(/^Mac/.test(H)?"Tasman":"Trident")){M=[g]}if(A){if(x(e,"global")){if(o){g=o.lang.System;y=g.getProperty("os.arch");H=H||g.getProperty("os.name")+" "+g.getProperty("os.version")}if(n){if(v==t&&typeof system=="object"&&(g=[system])[0]){H||(H=g[0].os||null);try{g[1]=require("ringo/engine").version;O=g[1].join(".");_="RingoJS"}catch(z){if(g[0].global==r){_="Narwhal"}}}else if(typeof process=="object"&&(g=process)){_="Node.js";y=g.arch;H=g.platform;O=/[\d.]+/.exec(g.version)[0]}else if(u){_="Rhino"}}else if(u){_="Rhino"}}else if(E(g=e.runtime)=="ScriptBridgingProxyObject"){_="Adobe AIR";H=g.flash.system.Capabilities.os}else if(E(g=e.phantom)=="RuntimeObject"){_="PhantomJS";O=(g=g.version||null)&&g.major+"."+g.minor+"."+g.patch}else if(typeof l.documentMode=="number"&&(g=/\bTrident\/(\d+)/i.exec(c))){O=[O,l.documentMode];if((g=+g[1]+4)!=O[1]){S.push("IE "+O[1]+" mode");M[1]="";O[1]=g}O=_=="IE"?String(O[1].toFixed(1)):O[0]}H=H&&b(H)}if(O&&(g=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(O)||/(?:alpha|beta)(?: ?\d)?/i.exec(c+";"+(A&&h.appMinorVersion))||/\bMinefield\b/i.test(c)&&"a")){L=/b/i.test(g)?"beta":"alpha";O=O.replace(RegExp(g+"\\+?$"),"")+(L=="beta"?f:a)+(/\d+\+?/.exec(g)||"")}if(_=="Fennec"){_="Firefox Mobile"}else if(_=="Maxthon"&&O){O=O.replace(/\.[\d.]+/,".x")}else if(_=="Silk"){if(!/Mobi/i.test(c)){H="Android";S.unshift("desktop mode")}if(/Accelerated *= *true/i.test(c)){S.unshift("accelerated")}}else if(_=="IE"&&(g=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(c)||0)[1])){_+=" Mobile";H="Windows Phone OS "+g+".x";S.unshift("desktop mode")}else if((_=="IE"||_&&!D&&!/Browser|Mobi/.test(_))&&(H=="Windows CE"||/Mobi/i.test(c))){_+=" Mobile"}else if(_=="IE"&&A&&typeof external=="object"&&!external){S.unshift("platform preview")}else if(/BlackBerry/.test(D)&&(g=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(c)||0)[1]||O)){H="Device Software "+g;O=null}else if(this!=w&&(A&&p||/Opera/.test(_)&&/\b(?:MSIE|Firefox)\b/i.test(c)||_=="Firefox"&&/OS X (?:\d+\.){2,}/.test(H)||_=="IE"&&(H&&!/^Win/.test(H)&&O>5.5||/Windows XP/.test(H)&&O>8||O==8&&!/Trident/.test(c)))&&!i.test(g=k.call(w,c.replace(i,"")+";"))&&g.name){g="ing as "+g.name+((g=g.version)?" "+g:"");if(i.test(_)){if(/IE/.test(g)&&H=="Mac OS"){H=null}g="identify"+g}else{g="mask"+g;if(d){_=b(d.replace(/([a-z])([A-Z])/g,"$1 $2"))}else{_="Opera"}if(/IE/.test(g)){H=null}if(!A){O=null}}M=["Presto"];S.push(g)}if(g=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(c)||0)[1]){g=[parseFloat(g.replace(/\.(\d)$/,".0$1")),g];if(_=="Safari"&&g[1].slice(-1)=="+"){_="WebKit Nightly";L="alpha";O=g[1].slice(0,-1)}else if(O==g[1]||O==(/\bSafari\/([\d.]+\+?)/i.exec(c)||0)[1]){O=null}g=[g[0],(/\bChrome\/([\d.]+)/i.exec(c)||0)[1]];if(!A||/internal|\n/i.test(s.toString())&&!g[1]){M[1]="like Safari";g=(g=g[0],g<400?1:g<500?2:g<526?3:g<533?4:g<534?"4+":g<535?5:"5")}else{M[1]="like Chrome";g=g[1]||(g=g[0],g<530?1:g<532?2:g<532.05?3:g<533?4:g<534.03?5:g<534.07?6:g<534.1?7:g<534.13?8:g<534.16?9:g<534.24?10:g<534.3?11:g<535.01?12:g<535.02?"13+":g<535.07?15:g<535.11?16:g<535.19?17:g<536.05?18:g<536.1?19:g<537.01?20:"21")}M[1]+=" "+(g+=typeof g=="number"?".x":/[.+]/.test(g)?"":"+");if(_=="Safari"&&(!O||parseInt(O)>45)){O=g}}if(_=="Opera"&&(g=/(?:zbov|zvav)$/.exec(H))){_+=" ";S.unshift("desktop mode");if(g=="zvav"){_+="Mini";O=null}else{_+="Mobile"}}else if(_=="Safari"&&/Chrome/.exec(M[1])){S.unshift("desktop mode");_="Chrome Mobile";O=null;if(/Mac OS X/.test(H)){P="Apple";H="iOS 4.3+"}else{H=null}}if(O&&O.indexOf(g=/[\d.]+$/.exec(H))==0&&c.indexOf("/"+g+"-")>-1){H=C(H.replace(g,""))}if(M&&!/Avant|Nook/.test(_)&&(/Browser|Lunascape|Maxthon/.test(_)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(_)&&M[1])){(g=M[M.length-1])&&S.push(g)}if(S.length){S=["("+S.join("; ")+")"]}if(P&&D&&D.indexOf(P)<0){S.push("on "+P)}if(D){S.push((/^on /.test(S[S.length-1])?"":"on ")+D)}if(H){g=/ ([\d.+]+)$/.exec(H);H={architecture:32,family:g?H.replace(g[0],""):H,version:g?g[1]:null,toString:function(){var e=this.version;return this.family+(e?" "+e:"")+(this.architecture==64?" 64-bit":"")}}}if((g=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(y))&&!/\bi686\b/i.test(y)){if(H){H.architecture=64;H.family=H.family.replace(RegExp(" *"+g),"")}if(_&&(/WOW64/i.test(c)||A&&/\w(?:86|32)$/.test(h.cpuClass||h.platform))){S.unshift("32-bit")}}c||(c=null);return{version:_&&O&&(S.unshift(O),O),name:_&&(S.unshift(_),_),os:H?(_&&!(H==String(H).split(" ")[0]&&(H==_.split(" ")[0]||D))&&S.push(D?"("+H+")":"on "+H),H):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:S.length?S.join(" "):c,layout:M&&M[0],manufacturer:P,prerelease:L,product:D,ua:c,parse:k,toString:U}}var t=e;var n=typeof exports=="object"&&exports;var r=typeof global=="object"&&global&&(global==global.global?e=global:global);var i=/Opera/;var s=Object.prototype.toString;var o=/Java/.test(E(e.java))&&e.java;var u=o&&E(e.environment)=="Environment";var a=o?"a":"α";var f=o?"b":"β";var l=e.document||{};var c={}.hasOwnProperty;var h=e.navigator||{};var p=e.operamini||e.opera;var d=i.test(d=E(p))?d:p=null;var v=this;var m=h.userAgent||"";if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){return k()})}else if(n&&!n.nodeType){w(k(),function(e,t){n[t]=e})}else{e.platform=k()}})(this)