var requirejs,require,define;(function(e){var h,a,k,l,d={},c={},r={},o={},j=Object.prototype.hasOwnProperty,i=[].slice;function s(t,u){return j.call(t,u)}function m(w,u){var E,A,y,B,x,G,H,D,C,z,F=u&&u.split("/"),v=r.map,t=(v&&v["*"])||{};if(w&&w.charAt(0)==="."){if(u){F=F.slice(0,F.length-1);w=F.concat(w.split("/"));for(D=0;D<w.length;D+=1){z=w[D];if(z==="."){w.splice(D,1);D-=1}else{if(z===".."){if(D===1&&(w[2]===".."||w[0]==="..")){break}else{if(D>0){w.splice(D-1,2);D-=2}}}}}w=w.join("/")}else{if(w.indexOf("./")===0){w=w.substring(2)}}}if((F||t)&&v){E=w.split("/");for(D=E.length;D>0;D-=1){A=E.slice(0,D).join("/");if(F){for(C=F.length;C>0;C-=1){y=v[F.slice(0,C).join("/")];if(y){y=y[A];if(y){B=y;x=D;break}}}}if(B){break}if(!G&&t&&t[A]){G=t[A];H=D}}if(!B&&G){B=G;x=H}if(B){E.splice(0,x,B);w=E.join("/")}}return w}function q(t,u){return function(){return a.apply(e,i.call(arguments,0).concat([t,u]))}}function n(t){return function(u){return m(u,t)}}function f(t){return function(u){d[t]=u}}function g(u){if(s(c,u)){var t=c[u];delete c[u];o[u]=true;h.apply(e,t)}if(!s(d,u)&&!s(o,u)){throw new Error("No "+u)}return d[u]}function p(u){var v,t=u?u.indexOf("!"):-1;if(t>-1){v=u.substring(0,t);u=u.substring(t+1,u.length)}return[v,u]}k=function(u,t){var v,x=p(u),w=x[0];u=x[1];if(w){w=m(w,t);v=g(w)}if(w){if(v&&v.normalize){u=v.normalize(u,n(t))}else{u=m(u,t)}}else{u=m(u,t);x=p(u);w=x[0];u=x[1];if(w){v=g(w)}}return{f:w?w+"!"+u:u,n:u,pr:w,p:v}};function b(t){return function(){return(r&&r.config&&r.config[t])||{}}}l={require:function(t){return q(t)},exports:function(t){var u=d[t];if(typeof u!=="undefined"){return u}else{return(d[t]={})}},module:function(t){return{id:t,uri:"",exports:d[t],config:b(t)}}};h=function(u,D,C,B){var w,A,x,t,v,y=[],z;B=B||u;if(typeof C==="function"){D=!D.length&&C.length?["require","exports","module"]:D;for(v=0;v<D.length;v+=1){t=k(D[v],B);A=t.f;if(A==="require"){y[v]=l.require(u)}else{if(A==="exports"){y[v]=l.exports(u);z=true}else{if(A==="module"){w=y[v]=l.module(u)}else{if(s(d,A)||s(c,A)||s(o,A)){y[v]=g(A)}else{if(t.p){t.p.load(t.n,q(B,true),f(A),{});y[v]=d[A]}else{throw new Error(u+" missing "+A)}}}}}}x=C.apply(d[u],y);if(u){if(w&&w.exports!==e&&w.exports!==d[u]){d[u]=w.exports}else{if(x!==e||!z){d[u]=x}}}}else{if(u){d[u]=C}}};requirejs=require=a=function(w,x,t,u,v){if(typeof w==="string"){if(l[w]){return l[w](x)}return g(k(w,x).f)}else{if(!w.splice){r=w;if(x.splice){w=x;x=t;t=null}else{w=e}}}x=x||function(){};if(typeof t==="function"){t=u;u=v}if(u){h(e,w,x,t)}else{setTimeout(function(){h(e,w,x,t)},4)}return a};a.config=function(t){r=t;if(r.deps){a(r.deps,r.callback)}return a};define=function(t,u,v){if(!u.splice){v=u;u=[]}if(!s(d,t)&&!s(c,t)){c[t]=[t,u,v]}};define.amd={jQuery:true}}());define("BenchmarkViewModel",["knockout"],function(a){var b=function(){this.name=a.observable("");this.expression=a.observable("");this.hz=a.observable(0);this.relativateMarginError=a.observable("");this.timesFaster=a.observable("pending...");this.slowest=a.observable(false);this.fastest=a.observable(false);this.iterationPerSampleCycle=a.observable(0);this.numAnalysisCycles=a.observable(0);this.numSampleCycles=a.observable(0)};return b});define("Spy",[],function(){return function(b){function a(){var c=Array.prototype.slice.call(arguments);a.calls.push(c);b.apply(this,c)}a.prototype=b.prototype;a.calls=[];return a}});define("Suite",["Test","benchmark","knockout","SuiteViewModel","BenchmarkViewModel"],function(d,c,a,e,f){var b=function(i,h){var g=this;g.vm,g.jsContext,g.benchmarkSuite=new c.Suite;g.themeManager=window.ThemeManager;g.setupContextBreakdown=function(l,n){var p="",k="";for(var o in l){if(l[o] instanceof Function){try{p=l[o].toString();k=Js2coffee.build(p);var j={name:n+"."+o,jsStr:p,coffeeStr:k};g.vm.testCases.push(j)}catch(m){}}else{if(l[o] instanceof Object){if(Object.toSource){var j={name:o,js:l[o].toSource()};g.vm.testCases.push(j)}}}if(l[o]&&l[o].prototype){g.setupContextBreakdown(l[o].prototype,n+"."+o+".prototype")}}};g.map=function(){g.vm=new e();g.vm.suiteDesc(i);g.vm.jsContextStr(h.toString()+"\n var c = new context();");g.vm.coffeeContextStr(Js2coffee.build(g.vm.jsContextStr()));g.vm.benchmarkPlatform(c.platform.description);g.jsContext=new h();g.setupContextBreakdown(g.jsContext,"context")};g.map();g.benchmarkSuite.on("cycle",function(k){var j=k.target;var l=new f();l.name(j.name);l.expression(j.name.replace(/context\.(.*?)\(\)\;/gi,"$1"));l.hz(j.hz.toFixed(0));l.relativateMarginError(j.stats.rme.toFixed(2)+"%");l.iterationPerSampleCycle(j.count);l.numAnalysisCycles(j.cycles);l.numSampleCycles(j.stats.sample.length);g.vm.benchmarks.push(l)}).on("complete",function(){g.vm.benchmarks.sort(function(p,n){var m=parseInt(p.hz());var o=parseInt(n.hz());return m==o?0:(m>o?-1:1)});g.vm.benchmarks()[0].fastest(true);var l=g.vm.benchmarks().length;g.vm.benchmarks()[l-1].slowest(true);var k=g.vm.benchmarks()[l-1].hz();for(var j=0;j<l;j++){g.vm.benchmarks()[j].timesFaster((g.vm.benchmarks()[j].hz()/k).toFixed(3))}g.vm.benchmarksDone(true)});g.add=function(j,l){if(typeof l=="function"){g.addTestWithBenchmarks(j,l,null)}else{var m=g.jsContext;var k=new Function("c","return c."+l);g.addTestWithBenchmarks(j,k,null)}return g};g.addTestWithBenchmarks=function(k,m,j){var n=new d(k,m,g.jsContext,j);g.vm.tests.push(n);if(j){var l=(function(p,o){return function(){p[o]()}})(g.jsContext,j);g.benchmarkSuite.add({name:n.expression,fn:l,async:true,queued:true,minSamples:100})}else{g.benchmarkSuite.add(n.expression,function(){m(g.jsContext)},{async:true,queued:true,minSamples:100})}return g};g.shouldEqual=function(j){g.shouldEqualValue=j;return g};g.compare=function(){var k=function(m,l){return m[l]()};for(var j in g.jsContext){g.addTestWithBenchmarks(g.shouldEqualValue,k,j)}return g};g.run=function(){g.vm.benchmarksDone(false);g.vm.benchmarks.removeAll();g.benchmarkSuite.run()}};return b});define("SuiteViewModel",["knockout","UnitTestFrameworkManager"],function(a,c){var b=function(){this.suiteDesc=a.observable("");this.jsContextStr=a.observable("");this.coffeeContextStr=a.observable("");this.tests=a.observableArray([]);this.testCases=a.observableArray([]);this.shouldShow=a.observable(true);this.benchmarks=a.observableArray([]);this.benchmarksDone=a.observable(false);this.benchmarkPlatform=a.observable("");this.unitTestFrameworkManager=new c()};return b});define("Test",[],function(){var a=function(e,f,d,c){var b=f.toString().trim();if(c){this.expression=c+"()";this.actual=f(d,c)}else{this.expression=b.replace(/\n/gm,"").replace(/function +?\(c\) +?\{ +?return(.*?) +?;/g,"$1");this.actual=f(d)}this.shouldEqual=e;this.typeOf=typeof(this.actual)};return a});define("UnitTestFrameworkManager",[],function(){return function a(){a.prototype.init=function(){if(!amplify.store("currentUnitTestFramework")){this.set("itchcork")}return this.getFramework()};a.prototype.set=function(b){if(b!=amplify.store("currentUnitTestFramework")){amplify.store("currentUnitTestFramework",b)}};a.prototype.getFramework=function(){return amplify.store("currentUnitTestFramework")}}});define("Verify",[],function(){return function(a){return function(){var d=Array.prototype.slice.call(arguments),e,c,f,g=0,b;for(e=0;e<a.calls.length;e+=1){f=a.calls[e];b=true;for(c=0;c<d.length;c+=1){if(d[c]!==f[c]){b=false;break}}if(b){g+=1}}return g>0}}});define("ItchCork",["Suite","SuiteView","Test","Spy","Verify","UnitTestFrameworkManager"],function(a,e,g,b,f,c){var d=function(){d.prototype.Suite=a;d.prototype.SuiteView=e;d.prototype.Test=g;d.prototype.Spy=b;d.prototype.Verify=f;d.prototype.UnitTestFrameworkManager=c};return new d()});var testcase="";if(window.location.pathname&&window.location.pathname.length>1){testcase=window.location.pathname.split("/")[1]}else{if(window.location.hash&&window.location.hash.length>1){testcase=window.location.hash.split("#")[1]}else{testcase="datetime"}}var root="raw.github.com/adamjmoon/itchcork/master/";requirejs.config({baseUrl:"https://",paths:{themeManager:root+"themeManager",bootstrap:"netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min",underscore:"cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min",coffeescript:root+"vendor/coffee/coffeescript.min",js2coffee:root+"vendor/coffee/js2coffee",ItchCork:root+"itchcork.min",lodash:root+"vendor/aa.lodash.min",mocha:root+"vendor/mocha",sinonM:root+"vendor/sinon",chai:root+"vendor/chai","sinon-chai":root+"vendor/sinon-chai",platform:root+"vendor/platform",benchmark:root+"vendor/benchmark",knockout:"ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.1",context:root+"examples/context/"+testcase,suite:root+"examples/test/"+testcase}});require(["themeManager","underscore","knockout","bootstrap"],function(){$("#topNav").show();$("div.frame").show();require(["coffeescript","platform","benchmark","sinonM"],function(a){this.CoffeeScript=a;require(["js2coffee"],function(){require(["ItchCork"],function(c){var b=new c.UnitTestFrameworkManager();if(b.init()==="itchcork"){require(["suite"],function(e){var d=new c.SuiteView();d.add(e)})}else{define("sinon",[],function(){return sinon});require(["chai","sinon","sinon-chai","mocha"],function(g,f,h){g.use(h);var e=g.assert;var d=g.should();mocha.setup("bdd");mocha.reporter("html");require(["suite"],function(i){var j=mocha.run();j.on("end",function(){var k=$("ul#mocha-report li.suite ul");$("#collapse").click(function(){$(k).each(function(l,m){m.hidden=true});$("#collapse").hide();$("#expand").show()});$("#expand").click(function(){$(k).each(function(l,m){m.hidden=false});$("#expand").hide();$("#collapse").show()})})})})}})})})});